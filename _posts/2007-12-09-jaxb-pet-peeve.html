---
layout: post
title: "JAXB Pet-Peeve"
date: 2007-12-09
comments: false
---

<div class='post'>
A while back <a href="http://cox-engineering-log.blogspot.com/2007/11/27myisern-13-final-release.html">Randy Cox</a> made a comment on his blog about his teammate disliking JAXB:<br /><br /><span style="font-style: italic;">"Another aspect of our differences is Brian's drive to build a high quality system from the start, while I tend to like to start with the basics and increase scope incrementally. Brian's strong dislike of JaxB, resulted in a lot of work on the Model to mitigate the JaxB limitations."</span><br /><br /><br />Curious about what the limitations of JAXB were, I made a comment on his blog.  Sadly I was left out to dry on the matter and forgot about it for a month.  This past week at work I revisited my JAXB code and figured out one JAXB limitation.<br /><br /><span style="font-weight: bold;">There is no easy to abstract JAXB auto-generated classes.</span><br /><br />So what normally happens with JAXB is:<br /><ol><li>Create an XML schema</li><li>Run the XJC compiler, which creates the JAXB auto-generated classes.</li><li>Write the java code using the JAXB classes to marshall and unmarshall data.</li></ol>The problem occurs when you have 2 JAXB objects that do similar things:<br /><br />Apple Object Interface:<br />setName()<br />setColor()<br /><br />Orange Object Interface:<br />setName()<br />setColor()<br /><br />So now you have 2 classes that perform the same operations.  You end having to write code specific to each object:<br /><br />Apple apple = new Apple();<br />apple.setName("Ringo");<br />apple.setColor("Red");<br /><br />Orange orange = new Orange();<br />orange.setName("Japanese name for an orange");<br />orange.setColor("Orange");<br /><br />This is an excellent time to abstract their behaviors to enforce the <a href="http://en.wikipedia.org/wiki/Don%27t_repeat_yourself">DRY</a> principle.  Why don't we go ahead and create a 'Fruit' interface that abstracts the behavior of each object?  Technically you can, but because the Apple and Orange classes are auto-generated, it isn't such a good idea to edit them directly.  If you ever decide to change the XML schema, you will have to re-run the XJC compiler, which in turn will overwrite your changes.  Another alternative is to wrap the JAXB objects in a wrapper class to provide a common interface.  If the schema changes, the auto-generated class changes will be transparent to the wrapper's clients.<br /><br />Although it is possible to provide common interfaces between the JAXB objects, there is no clean way to do it.  Maybe there should be a way to specify behaviors of objects to the XJC compiler.  That would remove the round-about way of abstracting the JAXB classes.<br /><br />I'm sure that there even more limitations to the JAXB package, but currently it's benefits outweigh the drawbacks.  XML parsing is fun again!  (Well, more fun than manipulating the XML DOM tree directly)<br /><span style="font-weight: bold;"><br /><br /></span></div>
